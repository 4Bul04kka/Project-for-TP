{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nexport function trackYandexMetricaGoal(id, goal) {\n  // Ensure Yandex Metrica script has loaded and initialized\n  if (typeof window.ym !== \"undefined\") {\n    window.ym(id, \"reachGoal\", goal);\n    console.log(`Goal ${goal} sent to Yandex Metrica`);\n  } else {\n    console.warn(\"Yandex Metrica is not loaded yet.\");\n  }\n}\nfunction YandexMetrica({\n  id\n}) {\n  _s();\n  useEffect(() => {\n    // Load Yandex Metrica script dynamically\n    (function (m, e, t, r, i, k, a) {\n      m[i] = m[i] || function () {\n        (m[i].a = m[i].a || []).push(arguments);\n      };\n      m[i].l = 1 * new Date();\n      for (let j = 0; j < document.scripts.length; j++) {\n        if (document.scripts[j].src === r) {\n          return;\n        }\n      }\n      k = e.createElement(t);\n      a = e.getElementsByTagName(t)[0];\n      k.async = 1;\n      k.src = r;\n      a.parentNode.insertBefore(k, a);\n    })(window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\n\n    // Wait for the script to initialize Yandex Metrica\n    const checkYMInitialized = setInterval(() => {\n      if (typeof window.ym !== \"undefined\") {\n        window.ym(id, \"init\", {\n          clickmap: true,\n          trackLinks: true,\n          accurateTrackBounce: true,\n          webvisor: true\n        });\n        clearInterval(checkYMInitialized);\n        console.log(\"Yandex Metrica initialized.\");\n      }\n    }, 100);\n\n    // Cleanup script when component unmounts\n    return () => {\n      clearInterval(checkYMInitialized);\n      const script = document.querySelector(`script[src=\"https://mc.yandex.ru/metrika/tag.js\"]`);\n      if (script) {\n        script.remove();\n      }\n    };\n  }, [id]);\n  return null; // No visible UI component needed\n}\n_s(YandexMetrica, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = YandexMetrica;\nexport default YandexMetrica;\nvar _c;\n$RefreshReg$(_c, \"YandexMetrica\");","map":{"version":3,"names":["useEffect","trackYandexMetricaGoal","id","goal","window","ym","console","log","warn","YandexMetrica","_s","m","e","t","r","i","k","a","push","arguments","l","Date","j","document","scripts","length","src","createElement","getElementsByTagName","async","parentNode","insertBefore","checkYMInitialized","setInterval","clickmap","trackLinks","accurateTrackBounce","webvisor","clearInterval","script","querySelector","remove","_c","$RefreshReg$"],"sources":["C:/Users/4bul04kka/lunaris/client/src/utils/YandexMetrica.js"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\nexport function trackYandexMetricaGoal(id, goal) {\r\n  // Ensure Yandex Metrica script has loaded and initialized\r\n  if (typeof window.ym !== \"undefined\") {\r\n    window.ym(id, \"reachGoal\", goal);\r\n    console.log(`Goal ${goal} sent to Yandex Metrica`);\r\n  } else {\r\n    console.warn(\"Yandex Metrica is not loaded yet.\");\r\n  }\r\n}\r\n\r\nfunction YandexMetrica({ id }) {\r\n  useEffect(() => {\r\n    // Load Yandex Metrica script dynamically\r\n    (function (m, e, t, r, i, k, a) {\r\n      m[i] =\r\n        m[i] ||\r\n        function () {\r\n          (m[i].a = m[i].a || []).push(arguments);\r\n        };\r\n      m[i].l = 1 * new Date();\r\n      for (let j = 0; j < document.scripts.length; j++) {\r\n        if (document.scripts[j].src === r) {\r\n          return;\r\n        }\r\n      }\r\n      k = e.createElement(t);\r\n      a = e.getElementsByTagName(t)[0];\r\n      k.async = 1;\r\n      k.src = r;\r\n      a.parentNode.insertBefore(k, a);\r\n    })(window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\r\n\r\n    // Wait for the script to initialize Yandex Metrica\r\n    const checkYMInitialized = setInterval(() => {\r\n      if (typeof window.ym !== \"undefined\") {\r\n        window.ym(id, \"init\", {\r\n          clickmap: true,\r\n          trackLinks: true,\r\n          accurateTrackBounce: true,\r\n          webvisor: true,\r\n        });\r\n        clearInterval(checkYMInitialized);\r\n        console.log(\"Yandex Metrica initialized.\");\r\n      }\r\n    }, 100);\r\n\r\n    // Cleanup script when component unmounts\r\n    return () => {\r\n      clearInterval(checkYMInitialized);\r\n      const script = document.querySelector(\r\n        `script[src=\"https://mc.yandex.ru/metrika/tag.js\"]`\r\n      );\r\n      if (script) {\r\n        script.remove();\r\n      }\r\n    };\r\n  }, [id]);\r\n\r\n  return null; // No visible UI component needed\r\n}\r\n\r\nexport default YandexMetrica;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,OAAO,SAASC,sBAAsBA,CAACC,EAAE,EAAEC,IAAI,EAAE;EAC/C;EACA,IAAI,OAAOC,MAAM,CAACC,EAAE,KAAK,WAAW,EAAE;IACpCD,MAAM,CAACC,EAAE,CAACH,EAAE,EAAE,WAAW,EAAEC,IAAI,CAAC;IAChCG,OAAO,CAACC,GAAG,CAAE,QAAOJ,IAAK,yBAAwB,CAAC;EACpD,CAAC,MAAM;IACLG,OAAO,CAACE,IAAI,CAAC,mCAAmC,CAAC;EACnD;AACF;AAEA,SAASC,aAAaA,CAAC;EAAEP;AAAG,CAAC,EAAE;EAAAQ,EAAA;EAC7BV,SAAS,CAAC,MAAM;IACd;IACA,CAAC,UAAUW,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;MAC9BN,CAAC,CAACI,CAAC,CAAC,GACFJ,CAAC,CAACI,CAAC,CAAC,IACJ,YAAY;QACV,CAACJ,CAAC,CAACI,CAAC,CAAC,CAACE,CAAC,GAAGN,CAAC,CAACI,CAAC,CAAC,CAACE,CAAC,IAAI,EAAE,EAAEC,IAAI,CAACC,SAAS,CAAC;MACzC,CAAC;MACHR,CAAC,CAACI,CAAC,CAAC,CAACK,CAAC,GAAG,CAAC,GAAG,IAAIC,IAAI,CAAC,CAAC;MACvB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,QAAQ,CAACC,OAAO,CAACC,MAAM,EAAEH,CAAC,EAAE,EAAE;QAChD,IAAIC,QAAQ,CAACC,OAAO,CAACF,CAAC,CAAC,CAACI,GAAG,KAAKZ,CAAC,EAAE;UACjC;QACF;MACF;MACAE,CAAC,GAAGJ,CAAC,CAACe,aAAa,CAACd,CAAC,CAAC;MACtBI,CAAC,GAAGL,CAAC,CAACgB,oBAAoB,CAACf,CAAC,CAAC,CAAC,CAAC,CAAC;MAChCG,CAAC,CAACa,KAAK,GAAG,CAAC;MACXb,CAAC,CAACU,GAAG,GAAGZ,CAAC;MACTG,CAAC,CAACa,UAAU,CAACC,YAAY,CAACf,CAAC,EAAEC,CAAC,CAAC;IACjC,CAAC,EAAEb,MAAM,EAAEmB,QAAQ,EAAE,QAAQ,EAAE,qCAAqC,EAAE,IAAI,CAAC;;IAE3E;IACA,MAAMS,kBAAkB,GAAGC,WAAW,CAAC,MAAM;MAC3C,IAAI,OAAO7B,MAAM,CAACC,EAAE,KAAK,WAAW,EAAE;QACpCD,MAAM,CAACC,EAAE,CAACH,EAAE,EAAE,MAAM,EAAE;UACpBgC,QAAQ,EAAE,IAAI;UACdC,UAAU,EAAE,IAAI;UAChBC,mBAAmB,EAAE,IAAI;UACzBC,QAAQ,EAAE;QACZ,CAAC,CAAC;QACFC,aAAa,CAACN,kBAAkB,CAAC;QACjC1B,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC5C;IACF,CAAC,EAAE,GAAG,CAAC;;IAEP;IACA,OAAO,MAAM;MACX+B,aAAa,CAACN,kBAAkB,CAAC;MACjC,MAAMO,MAAM,GAAGhB,QAAQ,CAACiB,aAAa,CAClC,mDACH,CAAC;MACD,IAAID,MAAM,EAAE;QACVA,MAAM,CAACE,MAAM,CAAC,CAAC;MACjB;IACF,CAAC;EACH,CAAC,EAAE,CAACvC,EAAE,CAAC,CAAC;EAER,OAAO,IAAI,CAAC,CAAC;AACf;AAACQ,EAAA,CAjDQD,aAAa;AAAAiC,EAAA,GAAbjC,aAAa;AAmDtB,eAAeA,aAAa;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}